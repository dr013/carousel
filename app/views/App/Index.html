{{set . "title" "Home"}}
{{template "header.html" .}}
<!--suppress ALL -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Carousel</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
        {{if .session.auth}}
            <div class="navbar-right">
        <a class="navbar-brand" href="{{ url "App.Index" }}">Logged in as {{ .session.user }}</a>
        <a class="navbar-brand" href="{{ url "App.Logout"}}">Logout</a>
            </div>
        {{else}}
            <form class="navbar-form navbar-right" method="post" action="{{url "App.Login"}}">
                <input type="hidden" name="csrf_token" value="{{.csrf_token }}">
                <div class="form-group">
                    <input type="text" placeholder="BPC Login" class="form-control" name="user">
                </div>
                <div class="form-group">
                    <input type="password" placeholder="BPC Password" class="form-control" name="passwd">
                </div>
                <button type="submit" class="btn btn-success">Sign in</button>
            </form>
            {{end}}
        </div><!--/.navbar-collapse -->
    </div>
</nav>
<header class="jumbotron" style="background-color:#A9F16C">
    <div class="container">
        <div class="row">
            <h1>Carousel</h1>
            <p>Continuous integration resource system.</p>
        </div>
    </div>
</header>

<div class="container">
    <div class="container">
        <h2>Schema list</h2>
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Task</th>
                <th>Connect String</th>
                <th>Schema Weight, Point</th>
                <th>Locked Date</th>
                <th>Updated At</th>
            </tr>
            </thead>
            <tbody>
            {{range $rec := .schemas}}
            <tr>
                <td>{{$rec.Task}}</td>
                <td>{{$rec.DbLogin}}/********@{{$rec.DbHost}}:{{$rec.DbPort}}//{{$rec.DbName}}</td>
                <td>{{$rec.DbSize}}</td>
                <td>{{datetime $rec.LockedDate}}</td>
                <td>{{datetime $rec.UpdatedAt}}</td>
            </tr>
            {{end}}
            </tbody>
        </table>
    </div>
    <div class="container">
        <h2>Product list</h2>
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Created Date</th>
                <th>Schema Weight, Point</th>
                <th>Jira project</th>
                <th>Project</th>
                <th>Updated At</th>
            </tr>
            </thead>
            <tbody>
            {{range $rec := .products}}
            <tr>
                <td>{{$rec.Name}}</td>
                <td>{{$rec.Desc}}</td>
                <td>{{datetime $rec.CreatedAt}}</td>
                <td>{{$rec.Weight}}</td>
                <td><a href="http://jira.bpc.in:8080/projects/{{$rec.Jira}}" target="_blank">{{$rec.Jira}}</a></td>
                <td>{{$rec.Project}}</td>
                <td>{{$rec.UpdatedAt}}</td>
            </tr>
            {{end}}
            </tbody>
        </table>
    </div>

</div>
<div class="container">
    <div class="row">
        <div class="span6">
            {{template "flash.html" .}}
        </div>
    </div>
</div>

{{template "footer.html" .}}
